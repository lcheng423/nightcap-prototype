@import "tailwindcss";

:root {
  --background: #E3DED4;
  --foreground: #423530;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-din-rounded), sans-serif;
  --font-mono: ui-monospace, "SF Mono", Menlo, monospace;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-din-rounded), sans-serif;
}

/* iOS-like touch cursor inside the phone frame */
.ios-frame {
  cursor: none !important;
  user-select: none;
  -webkit-user-select: none;
}
.ios-frame * {
  cursor: none !important;
  user-select: none;
  -webkit-user-select: none;
}
.ios-frame a, .ios-frame button {
  cursor: none !important;
}

.ios-cursor {
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.18);
  border: 1.5px solid rgba(0, 0, 0, 0.08);
  transform: translate(-50%, -50%);
  transition: transform 0.12s cubic-bezier(0.25, 0.1, 0.25, 1),
              opacity 0.15s ease-out,
              width 0.12s cubic-bezier(0.25, 0.1, 0.25, 1),
              height 0.12s cubic-bezier(0.25, 0.1, 0.25, 1);
  opacity: 0;
}
.ios-cursor.visible {
  opacity: 1;
}
.ios-cursor.pressing {
  width: 22px;
  height: 22px;
  background: rgba(0, 0, 0, 0.28);
}

/* Hide scrollbar but keep scrolling */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* iOS-style slide transitions (10% slower: 0.35s → ~0.385s) */
@keyframes slide-in-from-right {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slide-out-to-right {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(100%);
  }
}

.slide-in-from-right {
  animation: slide-in-from-right 0.385s cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

.slide-out-to-right {
  animation: slide-out-to-right 0.385s cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

/* Home page: quick fade in/out with slide transition */
@keyframes fade-in-quick {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fade-out-quick {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.fade-in-quick {
  opacity: 0;
  animation: fade-in-quick 0.5s ease-out forwards;
}

.fade-out-quick {
  animation: fade-out-quick 0.2s ease-out forwards;
}

/* Typewriter cursor blink */
@keyframes cursor-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.cursor-blink {
  animation: cursor-blink 0.8s step-end infinite;
}

/* Typewriter: each letter fades in */
@keyframes typewriter-letter-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.typewriter-letter {
  opacity: 0;
  animation: typewriter-letter-in 0.12s ease-out forwards;
}

/* Staggered card enter – one after the other */
@keyframes card-enter {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card-enter {
  animation: card-enter 0.3s ease-out forwards;
}

/* Home: "Picked for you earlier today" + 4 boxes enter one at a time (first load only) */
@keyframes home-first-enter {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.home-first-enter {
  opacity: 0;
  animation: home-first-enter 0.35s ease-out var(--card-enter-delay, 0s) forwards;
}

/* Home: held card slow wiggle */
@keyframes home-held-wiggle {
  0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-50%, -50%) rotate(-1deg); }
  75% { transform: translate(-50%, -50%) rotate(1deg); }
}

.home-held-wiggle {
  animation: home-held-wiggle 0.6s ease-in-out infinite;
}

/* Home: card under cursor shrinks, rotates, moves 10% toward held slot */
.home-card-fly-snap {
  transition: transform 0.2s cubic-bezier(0.22, 0.61, 0.36, 1);
  transform-origin: center center;
}

/* Transcription box: fade in + move up 10px */
@keyframes transcription-enter {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.transcription-enter {
  animation: transcription-enter 0.3s ease-out forwards;
}

/* Content slides up and fades out before new user box appears at top */
@keyframes slide-up-out {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-56px);
  }
}

.slide-up-out {
  animation: slide-up-out 0.35s ease-out forwards;
}

/* Badge pop-in: quick snap */
@keyframes badge-pop-in {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  70% {
    transform: scale(1.15);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.badge-pop-in {
  animation: badge-pop-in 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) 1s forwards;
  opacity: 0;
}

/* Insight: 1) Background changes first (0–0.7s) */
@keyframes insight-bg-to-black {
  from {
    background-color: #E3DED4;
  }
  to {
    background-color: #000;
  }
}

.insight-bg-to-black {
  background-color: #E3DED4;
  animation: insight-bg-to-black 0.7s ease-out 0s forwards;
}

/* Insight: 2) Then the insight screen (card) zooms in (starts at 0.7s) */
@keyframes insight-card-zoom-in {
  from {
    opacity: 0;
    transform: scale(0.92);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.insight-card-zoom-in {
  opacity: 0;
  transform-origin: center center;
  animation: insight-card-zoom-in 0.8s ease-out 0.7s forwards;
}

/* Cat and overlay: visible with the card; subtle cat zoom + overlay after card lands (1.5s) */
@keyframes insight-cat-enter {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1.03);
  }
}

.insight-cat-enter {
  opacity: 0;
  animation: insight-cat-enter 1.2s ease-out 1s forwards;
}

@keyframes insight-cat-zoom-more {
  from {
    transform: scale(1);
  }
  to {
    transform: scale(1.1);
  }
}

.insight-cat-zoom-more {
  transform-origin: center center;
  animation: insight-cat-zoom-more 0.6s ease-out 2.2s forwards;
}

@keyframes insight-overlay-text-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.insight-overlay-text-fade-in {
  opacity: 0;
  animation: insight-overlay-text-fade-in 0.6s ease-out 2.2s forwards;
}

/* Insight → Home: card zooms out and fades, then home fades in */
@keyframes insight-exit-to-home {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

.insight-exit-to-home {
  animation: insight-exit-to-home 0.5s ease-in forwards;
}

/* Reflection → Insight: screen fades backward then turns black */
@keyframes fade-backward {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.92);
  }
}

.fade-backward {
  animation: fade-backward 0.45s ease-in forwards;
}

/* "See you daily insight" button: gentle fade-in + slow breathe */
@keyframes insight-btn-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes insight-btn-breathe {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.04);
  }
}

.insight-btn-enter {
  opacity: 0;
  animation: insight-btn-fade-in 0.8s ease-out 1s forwards;
}

.insight-btn-enter .insight-btn-breathe {
  animation: insight-btn-breathe 2.5s ease-in-out infinite;
}

/* Card overlay blanket: covers home content while card is open */
.card-blanket-in {
  opacity: 0;
  animation: card-back-fade-in 0.3s ease-out forwards;
}

@keyframes card-blanket-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.card-blanket-out {
  animation: card-blanket-out 0.3s ease-out forwards;
}

/* Card detail page: back button fade in */
@keyframes card-back-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.card-back-fade-in {
  opacity: 0;
  animation: card-back-fade-in 0.3s ease-out forwards;
}

@keyframes card-back-fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.card-back-fade-out {
  animation: card-back-fade-out 0.3s ease-out forwards;
}


/* Mic button: rotating single-color glow, speaking-style pulse when pressed */
.mic-glare {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  width: 180px;
  height: 180px;
  border-radius: 50%;
  background: radial-gradient(
    circle at center,
    #E5A58B 0%,
    rgba(229, 165, 139, 0.4) 40%,
    transparent 75%
  );
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease-out;
  z-index: 0;
  filter: blur(8px);
}

.mic-glare-active {
  opacity: 0.9;
  animation:
    mic-glare-color-rotate 10s ease-in-out infinite,
    mic-glare-speak 1.4s ease-in-out infinite;
}

@keyframes mic-glare-color-rotate {
  0%, 100% {
    background: radial-gradient(
      circle at center,
      #E5A58B 0%,
      rgba(229, 165, 139, 0.3) 50%,
      transparent 78%
    );
  }
  33.33% {
    background: radial-gradient(
      circle at center,
      #D56B93 0%,
      rgba(213, 107, 147, 0.3) 50%,
      transparent 78%
    );
  }
  66.67% {
    background: radial-gradient(
      circle at center,
      #80999F 0%,
      rgba(128, 153, 159, 0.3) 50%,
      transparent 78%
    );
  }
}

@keyframes mic-glare-speak {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1.05);
    opacity: 0.85;
  }
  35% {
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 0.95;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.08);
    opacity: 0.88;
  }
  70% {
    transform: translate(-50%, -50%) scale(1.18);
    opacity: 0.92;
  }
}
